{"1761313509378":{"actionType":"saveAll","createdAt":"1761313509378","actionID":"1761313509378","userID":"#TEMP","path":"system.capsules.7d48ab0a-bf32-4fe2-99c6-bc478137fba3.capsUseCodeInfo.capsUseInputs.sss_freeValue-0.capsIptTxtValue","oldValue":"\n// ---------- import Packs\nimport * as Google from 'expo-auth-session/providers/google';\nimport * as WebBrowser from 'expo-web-browser';\nimport React from 'react';\nimport {\n  ActivityIndicator,\n  Platform,\n  Pressable,\n  Text,\n  View,\n} from 'react-native';\n\n// Finaliza sessões pendentes (necessário para Web/Expo)\nWebBrowser.maybeCompleteAuthSession();\n\ntype Tprops = {\n  pass: {\n    arrFuncs?: {};\n    configs?: string[];\n    args?: {};\n  };\n};\n\n// ---------- IDs do Google OAuth por plataforma (preencha!)\nconst IOS_CLIENT_ID = '';\nconst ANDROID_CLIENT_ID =\n  '1099098264007-thb39j1g2ilg74mvrquruu01iaifj9e1.apps.googleusercontent.com';\n\n// =========================================\n// Componente: Login para Nativo (Android/iOS)\n// =========================================\nexport const LoginNative = () => {\n  const [loading, setLoading] = React.useState(false);\n\n  // Somente Android nativo\n  const [request, response, promptAsync] = Google.useIdTokenAuthRequest({\n    androidClientId: ANDROID_CLIENT_ID,\n    selectAccount: true,\n  });\n\n  React.useEffect(() => {\n    if (!response) return;\n    setLoading(false);\n\n    if (response.type === 'success') {\n      const idToken = response.params?.id_token as string | undefined;\n      console.log('[LoginAndroid] id_token:', idToken);\n      // -> autentique no backend/Firebase se desejar\n    } else if (response.type === 'error') {\n      console.error('[LoginAndroid] error:', (response as any)?.error);\n    }\n  }, [response]);\n\n  const handlePress = async () => {\n    try {\n      setLoading(true);\n      // Nativo: sem proxy\n      await promptAsync();\n    } catch (err) {\n      setLoading(false);\n      console.error('[LoginAndroid] promptAsync error:', err);\n    }\n  };\n\n  return (\n    <View style={{ alignItems: 'center' }}>\n      <Pressable\n        onPress={handlePress}\n        disabled={!request || loading}\n        style={{\n          backgroundColor: '#315e2d',\n          paddingHorizontal: 20,\n          height: 44,\n          borderRadius: 999,\n          alignItems: 'center',\n          justifyContent: 'center',\n          opacity: !request || loading ? 0.7 : 1,\n        }}\n      >\n        <Text style={{ color: '#fff', fontWeight: '700' }}>\n          {loading ? 'Conectando…' : 'Entrar com Google'}\n        </Text>\n      </Pressable>\n\n      {loading ? <ActivityIndicator style={{ marginTop: 8 }} /> : null}\n    </View>\n  );\n};\n\n// =========================================\n// Componente: Login para Web\n// =========================================\nconst LoginWeb = () => {\n  React.useEffect(() => {\n    (async () => {})();\n  }, []);\n\n  const handlePress = async () => {};\n\n  return (\n    <View style={{ alignItems: 'center' }}>\n      <Text>{'WEB'}</Text>\n    </View>\n  );\n};\n\n// =========================================\n// Wrapper: decide por plataforma\n// =========================================\nexport const Login = (props: Tprops) => {\n  const args = props?.pass?.args;\n  const [loading, setLoading] = React.useState(false);\n\n  if (Platform.OS === 'web') {\n    return <LoginWeb />;\n  }\n  return <LoginNative />;\n};\n\n","newValue":"// ---------- import Packs\nimport * as Google from 'expo-auth-session/providers/google';\nimport * as WebBrowser from 'expo-web-browser';\nimport React from 'react';\nimport {\n  ActivityIndicator,\n  Platform,\n  Pressable,\n  Text,\n  View,\n} from 'react-native';\n\n// Finaliza sessões pendentes (necessário para Web/Expo)\nWebBrowser.maybeCompleteAuthSession();\n\ntype Tprops = {\n  pass: {\n    arrFuncs?: {};\n    configs?: string[];\n    args?: {};\n  };\n};\n\n// ---------- IDs do Google OAuth por plataforma (preencha!)\nconst IOS_CLIENT_ID = '';\nconst ANDROID_CLIENT_ID =\n  '1099098264007-thb39j1g2ilg74mvrquruu01iaifj9e1.apps.googleusercontent.com';\n\n// =========================================\n// Componente: Login para Nativo (Android/iOS)\n// =========================================\nexport const LoginNative = () => {\n  const [loading, setLoading] = React.useState(false);\n\n  // Somente Android nativo\n  const [request, response, promptAsync] = Google.useIdTokenAuthRequest({\n    androidClientId: ANDROID_CLIENT_ID,\n    selectAccount: true,\n  });\n\n  React.useEffect(() => {\n    if (!response) return;\n    setLoading(false);\n\n    if (response.type === 'success') {\n      const idToken = response.params?.id_token as string | undefined;\n      console.log('[LoginAndroid] id_token:', idToken);\n      // -> autentique no backend/Firebase se desejar\n    } else if (response.type === 'error') {\n      console.error('[LoginAndroid] error:', (response as any)?.error);\n    }\n  }, [response]);\n\n  const handlePress = async () => {\n    try {\n      setLoading(true);\n      // Nativo: sem proxy\n      await promptAsync();\n    } catch (err) {\n      setLoading(false);\n      console.error('[LoginAndroid] promptAsync error:', err);\n    }\n  };\n\n  return (\n    <View style={{ alignItems: 'center' }}>\n      <Pressable\n        onPress={handlePress}\n        disabled={!request || loading}\n        style={{\n          backgroundColor: '#315e2d',\n          paddingHorizontal: 20,\n          height: 44,\n          borderRadius: 999,\n          alignItems: 'center',\n          justifyContent: 'center',\n          opacity: !request || loading ? 0.7 : 1,\n        }}\n      >\n        <Text style={{ color: '#fff', fontWeight: '700' }}>\n          {loading ? 'Conectando…' : 'Entrar com Google'}\n        </Text>\n      </Pressable>\n\n      {loading ? <ActivityIndicator style={{ marginTop: 8 }} /> : null}\n    </View>\n  );\n};\n\n// =========================================\n// Componente: Login para Web\n// =========================================\nconst LoginWeb = () => {\n  React.useEffect(() => {\n    (async () => {})();\n  }, []);\n\n  const handlePress = async () => {};\n\n  return (\n    <View style={{ alignItems: 'center' }}>\n      <Text>{'WEB'}</Text>\n    </View>\n  );\n};\n\n// =========================================\n// Wrapper: decide por plataforma\n// =========================================\nexport const Login = (props: Tprops) => {\n  const args = props?.pass?.args;\n  const [loading, setLoading] = React.useState(false);\n\n  if (Platform.OS === 'web') {\n    return <LoginWeb />;\n  }\n  return <LoginNative />;\n};\n\n"}}