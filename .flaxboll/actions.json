{"1764783191473":{"actionType":"saveAll","createdAt":"1764783191473","actionID":"1764783191473","userID":"#TEMP","path":"system.capsules.4aa321d9-9d4f-496e-842b-3a4ed16102c8.capsUseCodeInfo.capsUseInputs.sss_custom_caps-0.capsIptTxtValue","oldValue":"async (args) => {\n  const css1 =\n    \"color: green; background-color: black; font-size: 11px; padding: 2px 6px; border-radius: 3px\";\n  const css2 =\n    \"color: yellow; background-color: green; font-size: 10px; padding: 2px 6px; border-radius: 3px\";\n  const css3 =\n    \"color: limegreen; background-color: purple; font-size: 10px; padding: 2px 6px; border-radius: 3px\";\n\n  // set Lot CtData\n  const path = \"sc.C5.currents.lotData\";\n  const value = args[0];\n  tools.setData({ path, value });\n\n  // Init Firebase\n  const { getFirestore, query, where, collection, onSnapshot } = await import(\n    \"firebase/firestore\"\n  );\n  const fbInit = tools.getCtData(\"all.temp.fireInit\");\n  const db = getFirestore(fbInit);\n\n  // GET Condo Coll Firestore\n  const condoId = value?.condoId;\n  const usersRef = collection(db, \"condos\");\n  const q = query(usersRef, where(\"condoId\", \"==\", condoId));\n\n  // ---------- onSnapshot\n  onSnapshot(q, (snapshot) => {\n    const arrDocs: any[] = [];\n    snapshot.forEach((doc) => {\n      arrDocs.push(doc.data());\n    });\n\n    const firstDoc = arrDocs[0] || null;\n\n    console.log(\"%cWhere Cond\", css1, { arrConds: \"condoId == \" + condoId });\n    console.log(\"%cWhere Cond\", css1, { newArrStringRefs: \"condos\" });\n    console.log(\"%cWhere Docs Found (Real-Time)\", css2, { arrDocs });\n    \n    let currImage = null;\n    if (firstDoc) {\n      const arrImages = firstDoc.arrImages || [];\n      currImage = arrImages[0] || null;\n    }\n\n    // set Condo CtData\n    const path2 = \"sc.C5.currents.condoData\";\n    const value2 = {\n        ...firstDoc,\n        currImage,\n    };\n    \n    tools.setData({ path: path2, value: value2 });\n\n    console.log(\"%csetData sc.C5.currents.condoData\", css3, tools.getCtData(path2));\n  });\n}","newValue":"async (args) => {\n  const css1 =\n    \"color: green; background-color: black; font-size: 11px; padding: 2px 6px; border-radius: 3px\";\n  const css2 =\n    \"color: yellow; background-color: green; font-size: 10px; padding: 2px 6px; border-radius: 3px\";\n  const css3 =\n    \"color: limegreen; background-color: purple; font-size: 10px; padding: 2px 6px; border-radius: 3px\";\n\n  // set Lot CtData\n  const path = \"sc.C5.currents.lotData\";\n  const value = args[0];\n  tools.setData({ path, value });\n\n  // Init Firebase\n  const { getFirestore, query, where, collection, onSnapshot } = await import(\n    \"firebase/firestore\"\n  );\n  const fbInit = tools.getCtData(\"all.temp.fireInit\");\n  const db = getFirestore(fbInit);\n\n  // GET Condo Coll Firestore\n  const condoId = value?.condoId;\n  const usersRef = collection(db, \"condos\");\n  const q = query(usersRef, where(\"docId\", \"==\", condoId));\n\n  // ---------- onSnapshot\n  onSnapshot(q, (snapshot) => {\n    const arrDocs: any[] = [];\n    snapshot.forEach((doc) => {\n      arrDocs.push(doc.data());\n    });\n\n    const firstDoc = arrDocs[0] || null;\n\n    console.log(\"%cWhere Cond\", css1, { arrConds: \"docId == \" + condoId });\n    console.log(\"%cWhere Cond\", css1, { newArrStringRefs: \"condos\" });\n    console.log(\"%cWhere Docs Found (Real-Time)\", css2, { arrDocs });\n    \n    let currImage = null;\n    if (firstDoc) {\n      const arrImages = firstDoc.arrImages || [];\n      currImage = arrImages[0] || null;\n    }\n\n    // set Condo CtData\n    const path2 = \"sc.C5.currents.condoData\";\n    const value2 = {\n        ...firstDoc,\n        currImage,\n    };\n    \n    tools.setData({ path: path2, value: value2 });\n\n    console.log(\"%csetData sc.C5.currents.condoData\", css3, tools.getCtData(path2));\n  });\n}"}}