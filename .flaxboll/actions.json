{"1762796334632":{"actionType":"saveAll","createdAt":"1762796334632","actionID":"1762796334632","userID":"#TEMP","path":"system.capsules.343534c9-01e2-42be-a011-c3cc84291643.capsUseCodeInfo.capsUseInputs.sss_custom_caps-0.capsIptTxtValue","oldValue":"(args) => {\n  console.log(\"custom do where get lot by docId\", { args });\n\n  const objInstallments = args[0].installments;\n\n  // âœ… Garante que Ã© um objeto vÃ¡lido\n  if (typeof objInstallments !== \"object\" || objInstallments === null) {\n    console.log(\"âŒ installments invÃ¡lido:\", objInstallments);\n    return;\n  }\n\n  // âœ… Extrai todos os valores do objeto\n  const allValues = Object.values(objInstallments);\n\n  // âœ… Extrai e guarda numberOfInstallments e totalValue (se existirem)\n  const numberOfInstallments = objInstallments.numberOfInstallments || allValues.find(v => typeof v === \"number\") || null;\n  const totalValue = objInstallments.totalValue || allValues.find(v => typeof v === \"string\" && !v.installmentId) || null;\n\n  // âœ… Filtra apenas parcelas vÃ¡lidas (com installmentId)\n  const validInstallments = allValues.filter(\n    (item) => typeof item === \"object\" && item.installmentId\n  );\n\n  // âœ… Ordena as parcelas (por nÃºmero do ID)\n  validInstallments.sort((a, b) => {\n    const numA = parseInt(a.installmentId.replace(\"i\", \"\"));\n    const numB = parseInt(b.installmentId.replace(\"i\", \"\"));\n    return numA - numB;\n  });\n\n  // âœ… Exibe log detalhado\n  console.log(\"âœ… Parcelas filtradas e ordenadas:\", validInstallments);\n  console.log(\"ðŸ“¦ numberOfInstallments:\", numberOfInstallments);\n  console.log(\"ðŸ’° totalValue:\", totalValue);\n\n  // âœ… Define os dados para uso na tela\n  tools.setData({ path: \"sc.A9.lists.list1\", value: validInstallments });\n\n  // âœ… Armazena numberOfInstallments e totalValue separadamente\n  tools.setData({ path: \"sc.A9.data.numberOfInstallments\", value: numberOfInstallments });\n  tools.setData({ path: \"sc.A9.data.totalValue\", value: totalValue });\n};","newValue":"(args) => {\n  console.log(\"custom do where get lot by docId\", { args });\n\n  const objInstallments = args[0].installments;\n\n  // âœ… Garante que Ã© um objeto vÃ¡lido\n  if (typeof objInstallments !== \"object\" || objInstallments === null) {\n    console.log(\"âŒ installments invÃ¡lido:\", objInstallments);\n    return;\n  }\n\n  // âœ… Extrai todos os valores do objeto\n  const allValues = Object.values(objInstallments);\n\n  // âœ… Extrai e guarda numberOfInstallments e totalValue (se existirem)\n  const numberOfInstallments = objInstallments.numberOfInstallments || allValues.find(v => typeof v === \"number\") || null;\n  const totalValue = objInstallments.totalValue || allValues.find(v => typeof v === \"string\" && !v.installmentId) || null;\n\n  // âœ… Filtra apenas parcelas vÃ¡lidas (com installmentId)\n  const validInstallments = allValues.filter(\n    (item) => typeof item === \"object\" && item.installmentId\n  );\n\n  // âœ… Ordena as parcelas (por nÃºmero do ID)\n  validInstallments.sort((a, b) => {\n    const numA = parseInt(a.installmentId.replace(\"i\", \"\"));\n    const numB = parseInt(b.installmentId.replace(\"i\", \"\"));\n    return numA - numB;\n  });\n\n  // âœ… Exibe log detalhado\n  console.log(\"âœ… Parcelas filtradas e ordenadas:\", validInstallments);\n  console.log(\"ðŸ“¦ numberOfInstallments:\", numberOfInstallments);\n  console.log(\"ðŸ’° totalValue:\", totalValue);\n\n  // âœ… Define os dados para uso na tela\n  tools.setData({ path: \"sc.A9.lists.list1\", value: validInstallments });\n\n  // âœ… Armazena numberOfInstallments e totalValue separadamente\n  tools.setData({ path: \"sc.A9.data.numberOfInstallments\", value: numberOfInstallments });\n  tools.setData({ path: \"sc.A9.data.totalValue\", value: totalValue });\n}"}}