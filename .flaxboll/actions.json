{"1764871602943":{"actionType":"saveAll","createdAt":"1764871602943","actionID":"1764871602943","userID":"#TEMP","path":"system.capsules.ed524922-c596-4c6d-bf11-431450e28f54.capsUseCodeInfo.capsUseInputs.sss_custom_caps-0.capsIptTxtValue","oldValue":"(txt) => {\n  try {\n    if (typeof txt !== \"string\") txt = String(txt ?? \"\");\n\n    // ───────────────────────────────\n    // Mantém apenas números\n    // ───────────────────────────────\n    let clean = \"\";\n    for (let i = 0; i < txt.length; i++) {\n      const ch = txt[i];\n      if (ch >= \"0\" && ch <= \"9\") clean += ch;\n    }\n\n    // Limita a 9 dígitos do RG\n    if (clean.length > 9) clean = clean.slice(0, 9);\n\n    console.log({ clean });\n\n    // ───────────────────────────────\n    // Montagem da máscara RG: XX.XXX.XXX-X\n    // ───────────────────────────────\n    let masked = \"\";\n\n    if (clean.length > 0) masked = clean.slice(0, 2); // XX\n    if (clean.length >= 3) masked += \".\" + clean.slice(2, 5); // XX.XXX\n    if (clean.length >= 6) masked += \".\" + clean.slice(5, 8); // XX.XXX.XXX\n    if (clean.length === 9) masked += \"-\" + clean.slice(8, 9); // XX.XXX.XXX-X\n\n    console.log({ masked });\n\n    tools.functions.setVar({\n      args: \"\",\n      pass: {\n        keyPath: [\"sc.C2.forms.iptsChanges.userRg\"],\n        value: [String(masked)],\n      },\n    });\n  } catch (e) {\n    console.error(\"Erro na máscara de RG:\", e);\n    return txt;\n  }\n}\n","newValue":"(txt) => {\n  try {\n    if (typeof txt !== \"string\") txt = String(txt ?? \"\");\n\n    // ───────────────────────────────\n    // Mantém apenas números\n    // ───────────────────────────────\n    let clean = \"\";\n    for (let i = 0; i < txt.length; i++) {\n      const ch = txt[i];\n      if (ch >= \"0\" && ch <= \"9\") clean += ch;\n    }\n\n    // Limita a 9 dígitos do RG\n    if (clean.length > 9) clean = clean.slice(0, 9);\n\n    console.log({ clean });\n\n    // ───────────────────────────────\n    // Montagem da máscara RG: XX.XXX.XXX-X\n    // ───────────────────────────────\n    let masked = \"\";\n\n    if (clean.length > 0) masked = clean.slice(0, 2); // XX\n    if (clean.length >= 3) masked += \".\" + clean.slice(2, 5); // XX.XXX\n    if (clean.length >= 6) masked += \".\" + clean.slice(5, 8); // XX.XXX.XXX\n    if (clean.length === 9) masked += \"-\" + clean.slice(8, 9); // XX.XXX.XXX-X\n\n    console.log({ masked });\n\n    tools.functions.setVar({\n      args: \"\",\n      pass: {\n        keyPath: [\"sc.C2.forms.iptsChanges.userRg\"],\n        value: [String(masked)],\n      },\n    });\n  } catch (e) {\n    console.error(\"Erro na máscara de RG:\", e);\n    return txt;\n  }\n}"}}