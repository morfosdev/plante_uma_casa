{"1765387910583":{"actionType":"saveAll","createdAt":"1765387910583","actionID":"1765387910583","userID":"#TEMP","path":"system.capsules.50860a6c-d6a2-4a20-92c5-adde33b1c1d5.capsUseCodeInfo.capsUseInputs.sss_custom_caps_el-0.capsIptTxtValue","oldValue":"() => {\n  const data = useData((ct) => ct?.sc?.C7?.currents?.currLoteData) || {};\n  console.log(\"progressbar\", { data });\n\n  // --- Total de parcelas (installments)\n  const installmentsObj = data?.installments;\n  const total =\n    installmentsObj && typeof installmentsObj === \"object\"\n      ? Object.values(installmentsObj).length\n      : 0;\n\n  // --- Receipts válidos (somente com receiptUrl string não vazia)\n  const receiptsObj = data?.receipts;\n  console.log(\"progressbar receiptsObj\", receiptsObj);\n\n  const validReceipts =\n    receiptsObj && typeof receiptsObj === \"object\"\n      ? Object.values(receiptsObj).filter((rc: any) => {\n          const url = rc?.receiptUrl;\n          return typeof url === \"string\" && url.trim().length > 0;\n        })\n      : [];\n\n  const count = validReceipts.length;\n  const progress = total > 0 ? count / total : 0;\n  console.log(\"progressbar\", { total, count, progress });\n\n  const [grayWidthPx, setGrayWidthPx] = React.useState(0);\n\n  const stlGrayBar: RN.ViewStyle = {\n    width: \"100%\",\n    height: 6,\n    backgroundColor: \"#ededed\",\n    borderRadius: 10,\n    overflow: \"hidden\",\n  };\n\n  const stlGreenBar: RN.ViewStyle = {\n    width: grayWidthPx * progress,\n    height: 6,\n    backgroundColor: \"#315e2d\",\n    borderRadius: 10,\n  };\n\n  return (\n    <RN.View\n      style={stlGrayBar}\n      onLayout={(ev) => {\n        const w = ev?.nativeEvent?.layout?.width;\n        if (typeof w === \"number\") setGrayWidthPx(w);\n      }}\n    >\n      <RN.View style={stlGreenBar} />\n    </RN.View>\n  );\n};\n","newValue":"() => {\n  const data = useData((ct) => ct?.sc?.C7?.currents?.currLoteData) || {};\n  console.log(\"progressbar\", { data });\n\n  // --- Total de parcelas (installments)\n  const installmentsObj = data?.installments;\n  const total =\n    installmentsObj && typeof installmentsObj === \"object\"\n      ? Object.values(installmentsObj).length\n      : 0;\n\n  // --- Receipts válidos (somente com receiptUrl string não vazia)\n  const receiptsObj = data?.receipts;\n  console.log(\"progressbar receiptsObj\", receiptsObj);\n\n  const validReceipts =\n    receiptsObj && typeof receiptsObj === \"object\"\n      ? Object.values(receiptsObj).filter((rc: any) => {\n          const url = rc?.receiptUrl;\n          return typeof url === \"string\" && url.trim().length > 0;\n        })\n      : [];\n\n  const count = validReceipts.length;\n  const progress = total > 0 ? count / total : 0;\n  console.log(\"progressbar\", { total, count, progress });\n\n  const [grayWidthPx, setGrayWidthPx] = React.useState(0);\n\n  const stlGrayBar: RN.ViewStyle = {\n    width: \"100%\",\n    height: 6,\n    backgroundColor: \"#ededed\",\n    borderRadius: 10,\n    overflow: \"hidden\",\n  };\n\n  const stlGreenBar: RN.ViewStyle = {\n    width: grayWidthPx * progress,\n    height: 6,\n    backgroundColor: \"#315e2d\",\n    borderRadius: 10,\n  };\n\n  return (\n    <RN.View\n      style={stlGrayBar}\n      onLayout={(ev) => {\n        const w = ev?.nativeEvent?.layout?.width;\n        if (typeof w === \"number\") setGrayWidthPx(w);\n      }}\n    >\n      <RN.View style={stlGreenBar} />\n    </RN.View>\n  );\n}"}}