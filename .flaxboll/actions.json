{"1761316616718":{"actionType":"saveAll","createdAt":"1761316616718","actionID":"1761316616718","userID":"#TEMP","path":"system.capsules.302fb153-c0ba-4817-bec4-ac0912a7fc2b.capsUseCodeInfo.capsUseInputs.sss_custom_caps-0.capsIptTxtValue","oldValue":"async() => {\n  // Lista de campos obrigat√≥rios\n  const requiredFields = [\n    { path: \"sc.a1.iptChanges.condo\", name: \"Nome do Condom√≠nio\" },\n    { path: \"sc.a1.iptChanges.address\", name: \"Endere√ßo\" },\n    { path: \"sc.a1.iptChanges.startDate\", name: \"Data de In√≠cio\" },\n\t\t{ path: \"sc.a1.iptChanges.endDate\", name: \"Data de Conclus√£o Prevista\" },\n\t\t{ path: \"sc.a1.iptChanges.description\", name: \"Descri√ß√£o\" },\n  ];\n\n  // Fun√ß√£o auxiliar para obter valor seguro\n  const getVal = (path) => {\n    const val = tools.getCtData(path);\n    if (Array.isArray(val)) return val[0] ?? \"\";\n    return val ?? \"\";\n  };\n\n  // Checa os campos vazios\n  const emptyFields = requiredFields.filter((f) => {\n    const v = getVal(f.path);\n    return v === \"\" || v === null || v === undefined;\n  });\n\n  // Define mensagem e estado final\n  let message = \"\";\n\n  if (emptyFields.length > 0) {\n    const nomesCampos = emptyFields.map((f) => f.name).join(\", \");\n    message = `Preencha os campos obrigat√≥rios.`;\n\n    tools.functions.setVar({\n      args: \"\",\n      pass: {\n        keyPath: [\"sc.a1.validationMessage\"],\n        value: [message],\n      },\n    });\n\n    console.warn(\"‚ö†Ô∏è Campos vazios\");\n  } else {\n    message = \"‚úÖ Todos os campos foram preenchidos corretamente.\";\n\n    tools.functions.setVar({\n      args: \"\",\n      pass: {\n        keyPath: [\"sc.a1.validationMessage\"],\n        value: [message],\n      },\n    });\n\n    console.log(\"üíæ Valida√ß√£o OK ‚Äî pode salvar!\");\n  }\n\n// Garantir app inicializado\n  let fbInit = tools.getCtData('all.temp.fireInit');\n  if (!fbInit) {\n    const { initializeApp, getApps } = await import('firebase/app');\n    const cfg = tools.getCtData('all.temp.fireConfig'); \n\t\t// opcional: pegue sua config do CT\n    fbInit = getApps().length ? getApps()[0] : initializeApp(cfg);\n    tools.setData({ path: 'all.temp.fireInit', value: fbInit });\n  }\n}\n","newValue":"async () => {\n  // Lista de campos obrigat√≥rios\n  const requiredFields = [\n    { path: \"sc.a1.iptChanges.condo\", name: \"Nome do Condom√≠nio\" },\n    { path: \"sc.a1.iptChanges.address\", name: \"Endere√ßo\" },\n    { path: \"sc.a1.iptChanges.startDate\", name: \"Data de In√≠cio\" },\n\t\t{ path: \"sc.a1.iptChanges.endDate\", name: \"Data de Conclus√£o Prevista\" },\n\t\t{ path: \"sc.a1.iptChanges.description\", name: \"Descri√ß√£o\" },\n  ];\n\n  // Fun√ß√£o auxiliar para obter valor seguro\n  const getVal = (path) => {\n    const val = tools.getCtData(path);\n    if (Array.isArray(val)) return val[0] ?? \"\";\n    return val ?? \"\";\n  };\n\n  // Checa os campos vazios\n  const emptyFields = requiredFields.filter((f) => {\n    const v = getVal(f.path);\n    return v === \"\" || v === null || v === undefined;\n  });\n\n  // Define mensagem e estado final\n  let message = \"\";\n\n  if (emptyFields.length > 0) {\n    const nomesCampos = emptyFields.map((f) => f.name).join(\", \");\n    message = `Preencha os campos obrigat√≥rios.`;\n\n    tools.functions.setVar({\n      args: \"\",\n      pass: {\n        keyPath: [\"sc.a1.validationMessage\"],\n        value: [message],\n      },\n    });\n\n    console.warn(\"‚ö†Ô∏è Campos vazios\");\n  } else {\n    message = \"‚úÖ Todos os campos foram preenchidos corretamente.\";\n\n    tools.functions.setVar({\n      args: \"\",\n      pass: {\n        keyPath: [\"sc.a1.validationMessage\"],\n        value: [message],\n      },\n    });\n\n    console.log(\"üíæ Valida√ß√£o OK ‚Äî pode salvar!\");\n  }\n\n// Garantir app inicializado\n  let fbInit = tools.getCtData('all.temp.fireInit');\n  if (!fbInit) {\n    const { initializeApp, getApps } = await import('firebase/app');\n    const cfg = tools.getCtData('all.temp.fireConfig'); \n\t\t// opcional: pegue sua config do CT\n    fbInit = getApps().length ? getApps()[0] : initializeApp(cfg);\n    tools.setData({ path: 'all.temp.fireInit', value: fbInit });\n  }\n}\n"}}