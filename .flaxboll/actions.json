{"1769612474862":{"actionType":"saveAll","createdAt":"1769612474862","actionID":"1769612474862","userID":"#TEMP","path":"system.capsules.6eade7c9-1fb7-4ad8-9dce-a40e0de53fa0.capsUseCodeInfo.capsUseInputs.sss_custom_caps-0.capsIptTxtValue","oldValue":"async (user, args) => {\nconst {onAuthStateChanged } = await import(\"firebase/auth\");\n\n  console.log(\"Flax Custom Auth\", { user, args });\n\nif(user?.status === \"error\"){ \n\ttools.setData({path: \"sc.C1.forms.error\", value: true});\t\ntools.setData({path: \"sc.C1.forms.message\", value: user.message});\n\n\treturn;\n}\n\n  const path = \"all.authUser\";\n  const value = { ...user };\n  delete value.updateAt;\n\n  console.log(\"cond fullreg\", { path, value });\n  tools.setData({ path, value });\n\n  const path2 = \"all.toggles.checkboxGender\";\n\n  tools.setData({ path: path2, value: true });\n\n  const path3 = \"sc.C2.forms.iptsChanges.userName\";\n  tools.setData({ path: path3, value: value?.userName ?? \"\" });\n\n  // ---- set Cond Redirect\n  const fullRegister = value.fullRegister;\n\n  console.log({ fullRegister });\n\n\ttools.setData({path: \"sc.C1.forms.error\", value: false});\t\ntools.setData({path: \"sc.C1.forms.message\",value: \"\"});\n\n  if (fullRegister) {\n    tools.goTo(\"c5steps\");\n  }\n  if (!fullRegister) {\n    tools.goTo(\"c2register\");\n  }\n}","newValue":"async (user, args) => {\n  const { onAuthStateChanged } = await import(\"firebase/auth\");\n\n  console.log(\"Flax Custom Auth\", { user, args });\n\n  if (user?.status === \"error\") {\n    tools.setData({ path: \"sc.C1.forms.error\", value: true });\n    tools.setData({ path: \"sc.C1.forms.message\", value: user.message });\n\n    return;\n  }\n\n  const path = \"all.authUser\";\n  const value = { ...user };\n  delete value.updateAt;\n\n  console.log(\"cond fullreg\", { path, value });\n  tools.setData({ path, value });\n\n  const path2 = \"all.toggles.checkboxGender\";\n\n  tools.setData({ path: path2, value: true });\n\n  const path3 = \"sc.C2.forms.iptsChanges.userName\";\n  tools.setData({ path: path3, value: value?.userName ?? \"\" });\n\n  // ---- set Cond Redirect\n  const fullRegister = value.fullRegister;\n\n  console.log({ fullRegister });\n\n  tools.setData({ path: \"sc.C1.forms.error\", value: false });\n  tools.setData({ path: \"sc.C1.forms.message\", value: \"\" });\n\n  onAuthStateChanged(auth, (user) => {\n    if (user) {\n      // sessão ativa\n      if (fullRegister) {\n        tools.goTo(\"c5steps\");\n      }\n      if (!fullRegister) {\n        tools.goTo(\"c2register\");\n      }\n    } else {\n      // não logado\n      console.log(\"não logado\");\n      if (!fullRegister) {\n        tools.goTo(\"c1login\");\n      }\n    }\n  });\n}"}}