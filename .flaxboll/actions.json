{"1770832465284":{"actionType":"saveAll","createdAt":"1770832465284","actionID":"1770832465284","userID":"#TEMP","path":"system.capsules.65524307-852d-4c4e-a8f4-7d2a51915f71.capsUseCodeInfo.capsUseInputs.sss_freeValue-0.capsIptTxtValue","oldValue":"// ---------- import Packs\nimport JSON5 from \"json5\";\nimport React from \"react\";\nimport { Text as RNText, useWindowDimensions } from \"react-native\";\n\n// ---------- import Local Tools\nimport { useData } from \"../../..\";\nimport { getStlValues, getVarValue, pathSel } from \"../project\";\n\ntype Tprops = {\n  pass: { arrProps: any; arrStyles: any; children: any; args?: any };\n};\n\nconst trimLeftSpaces = (value: string) => {\n  let i = 0;\n  while (i < value.length) {\n    const ch = value[i];\n    if (ch !== \" \" && ch !== \"\\n\" && ch !== \"\" && ch !== \"\t\") break;\n    i++;\n  }\n  return value.slice(i);\n};\n\nconst extractMediaStyle = (style: string, mode: \"mobile\" | \"desktop\") => {\n  const mobileTag = \"@mediaMobile\";\n  const desktopTag = \"@mediaDesktop\";\n\n  if (mode === \"mobile\") {\n    const mobileStart = style.indexOf(mobileTag);\n    if (mobileStart < 0) return style;\n\n    const contentStart = mobileStart + mobileTag.length;\n    const desktopStart = style.indexOf(desktopTag, contentStart);\n    const rawContent =\n      desktopStart < 0\n        ? style.slice(contentStart)\n        : style.slice(contentStart, desktopStart);\n\n    return trimLeftSpaces(rawContent);\n  }\n\n  const desktopStart = style.indexOf(desktopTag);\n  if (desktopStart < 0) return style;\n\n  const contentStart = desktopStart + desktopTag.length;\n  return trimLeftSpaces(style.slice(contentStart));\n};\n\nexport const Text = (props: Tprops) => {\n  // ---------- set Capsules Inputs\n  const { width } = useWindowDimensions();\n  const { arrProps, arrStyles, args } = props.pass;\n  let { children } = props.pass;\n  const isMobile = width < 767;\n\n  // ---- Media Breakpoints\n  const processedStyles = React.useMemo(() => {\n    if (!Array.isArray(arrStyles)) {\n      return typeof arrStyles === \"string\" ? [] : [];\n    }\n\n    return arrStyles.map((style) => {\n      if (typeof style !== \"string\") return style;\n      return extractMediaStyle(style, isMobile ? \"mobile\" : \"desktop\");\n    });\n  }, [arrStyles, isMobile]);\n\n  const { condChildren, newArgChildren } = testArgs(children, args);\n\n  let watchChildren = \"\";\n\n  if (condChildren === \"arg\") children = newArgChildren;\n  if (condChildren === \"var\") {\n    const joinedChld = children.join().replace(\"$var_\", \"\");\n\n    watchChildren = useData((ct) => pathSel(ct, joinedChld));\n\n    children = watchChildren;\n  }\n\n  // Não existe mais leitor de var leitor de args\n\n  // ------- set User Element Properties (If Exists)\n  const userElProps: any = {};\n  for (let strObj of arrProps) {\n    if (!strObj) continue;\n    if (!props) continue;\n    if (typeof strObj !== \"string\") continue;\n\n    const parsedObject = JSON5.parse(strObj);\n\n    for (const keyProp in parsedObject) {\n      const valueProp = parsedObject[keyProp];\n\n      const [hasVar, varValue] = getVarValue(valueProp, \"Component\");\n\n      if (hasVar) userElProps[keyProp] = varValue;\n      if (!hasVar) userElProps[keyProp] = valueProp;\n    }\n  }\n\n  // ---------- set Variables Styles (If Exists)\n  const stl = getStlValues(processedStyles);\n\n  const allProps = {\n    style: stl,\n    children,\n\n    ...userElProps,\n  };\n\n  // ---------- set Render\n  return <RNText {...allProps} />;\n};\n\nconst findFlatItem = (obj) => {\n  if (typeof obj !== \"object\" || obj === null) return null;\n\n  if (\"item\" in obj) return obj.item;\n\n  for (const key in obj) {\n    if (Array.isArray(obj[key])) {\n      for (const element of obj[key]) {\n        const found = findFlatItem(element);\n        if (found) return found;\n      }\n    } else if (typeof obj[key] === \"object\") {\n      const found = findFlatItem(obj[key]);\n      if (found) return found;\n    }\n  }\n\n  return null;\n};\n\nconst testArgs = (children, args) => {\n  let condChildren = \"\";\n  let newArgChildren = \"undefined\";\n\n  const joinedChild = children.join();\n  if (joinedChild.includes(\"$var_\")) condChildren = \"var\";\n  if (joinedChild.includes(\"$arg_\")) condChildren = \"arg\";\n\n  if (condChildren === \"arg\") {\n    const key = joinedChild.split(\"_\")[1];\n\n    const foundItem = findFlatItem(args);\n    if (foundItem && foundItem[key]) {\n      newArgChildren = foundItem[key];\n    }\n  }\n\n  if (newArgChildren === \"undefined\") console.log(\"EL TEXT - ARG NOT FOUND\");\n\n  return { condChildren, newArgChildren };\n};\n","newValue":"// ---------- import Packs\nimport JSON5 from \"json5\";\nimport React from \"react\";\nimport { Text as RNText, useWindowDimensions } from \"react-native\";\n\n// ---------- import Local Tools\nimport { useData } from \"../../..\";\nimport { getStlValues, getVarValue, pathSel } from \"../project\";\n\ntype Tprops = {\n  pass: { arrProps: any; arrStyles: any; children: any; args?: any };\n};\n\nconst trimLeftSpaces = (value: string) => {\n  let i = 0;\n  while (i < value.length) {\n    const ch = value[i];\n    if (ch !== \" \" && ch !== \"\\n\" && ch !== \"\" && ch !== \"\t\") break;\n    i++;\n  }\n  return value.slice(i);\n};\n\nconst extractMediaStyle = (style: string, mode: \"mobile\" | \"desktop\") => {\n  const mobileTag = \"@mediaMobile\";\n  const desktopTag = \"@mediaDesktop\";\n\n  if (mode === \"mobile\") {\n    const mobileStart = style.indexOf(mobileTag);\n    if (mobileStart < 0) return style;\n\n    const contentStart = mobileStart + mobileTag.length;\n    const desktopStart = style.indexOf(desktopTag, contentStart);\n    const rawContent =\n      desktopStart < 0\n        ? style.slice(contentStart)\n        : style.slice(contentStart, desktopStart);\n\n    return trimLeftSpaces(rawContent);\n  }\n\n  const desktopStart = style.indexOf(desktopTag);\n  if (desktopStart < 0) return style;\n\n  const contentStart = desktopStart + desktopTag.length;\n  return trimLeftSpaces(style.slice(contentStart));\n};\n\nexport const Text = (props: Tprops) => {\n  // ---------- set Capsules Inputs\n  const { width } = useWindowDimensions();\n  const { arrProps, arrStyles, args } = props.pass;\n  let { children } = props.pass;\n  const isMobile = width < 767;\n\n  // ---- Media Breakpoints\n  const processedStyles = React.useMemo(() => {\n    if (!Array.isArray(arrStyles)) {\n      return typeof arrStyles === \"string\" ? [] : [];\n    }\n\n    return arrStyles.map((style) => {\n      if (typeof style !== \"string\") return style;\n      return extractMediaStyle(style, isMobile ? \"mobile\" : \"desktop\");\n    });\n  }, [arrStyles, isMobile]);\n\n  const { condChildren, newArgChildren } = testArgs(children, args);\n\n  let watchChildren = \"\";\n\n  if (condChildren === \"arg\") children = newArgChildren;\n  if (condChildren === \"var\") {\n    const joinedChld = children.join().replace(\"$var_\", \"\");\n\n    watchChildren = useData((ct) => pathSel(ct, joinedChld));\n\n    children = watchChildren;\n  }\n\n  // Não existe mais leitor de var leitor de args\n\n  // ------- set User Element Properties (If Exists)\n  const userElProps: any = {};\n  for (let strObj of arrProps) {\n    if (!strObj) continue;\n    if (!props) continue;\n    if (typeof strObj !== \"string\") continue;\n\n    const parsedObject = JSON5.parse(strObj);\n\n    for (const keyProp in parsedObject) {\n      const valueProp = parsedObject[keyProp];\n\n      const [hasVar, varValue] = getVarValue(valueProp, \"Component\");\n\n      if (hasVar) userElProps[keyProp] = varValue;\n      if (!hasVar) userElProps[keyProp] = valueProp;\n    }\n  }\n\n  // ---------- set Variables Styles (If Exists)\n  const stl = getStlValues(processedStyles);\n\n  const allProps = {\n    style: stl,\n    children,\n\n    ...userElProps,\n  };\n\n  // ---------- set Render\n  return <RNText {...allProps} />;\n};\n\nconst findFlatItem = (obj) => {\n  if (typeof obj !== \"object\" || obj === null) return null;\n\n  if (\"item\" in obj) return obj.item;\n\n  for (const key in obj) {\n    if (Array.isArray(obj[key])) {\n      for (const element of obj[key]) {\n        const found = findFlatItem(element);\n        if (found) return found;\n      }\n    } else if (typeof obj[key] === \"object\") {\n      const found = findFlatItem(obj[key]);\n      if (found) return found;\n    }\n  }\n\n  return null;\n};\n\nconst testArgs = (children, args) => {\n  let condChildren = \"\";\n  let newArgChildren = \"undefined\";\n\n  const joinedChild = children.join();\n  if (joinedChild.includes(\"$var_\")) condChildren = \"var\";\n  if (joinedChild.includes(\"$arg_\")) condChildren = \"arg\";\n\n  if (condChildren === \"arg\") {\n    const key = joinedChild.split(\"_\")[1];\n\n    const foundItem = findFlatItem(args);\n    if (foundItem && foundItem[key]) {\n      newArgChildren = foundItem[key];\n    }\n  }\n\n  if (newArgChildren === \"undefined\") console.log(\"EL TEXT - ARG NOT FOUND\");\n\n  return { condChildren, newArgChildren };\n};"}}