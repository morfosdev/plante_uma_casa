{"1763734649709":{"actionType":"saveAll","createdAt":"1763734649709","actionID":"1763734649709","userID":"#TEMP","path":"system.capsules.e8091205-abe6-4df8-8f28-63e76711dff0.capsUseCodeInfo.capsUseInputs.ccc_funcGroup-0.capsIptCapsValue","oldValue":["a2ecc872-1221-44bd-823b-d24be36fbef3","dcbbb23a-8af0-49ec-bcb0-d8b36d4234a5","381b3199-b3e6-483b-bc92-f8fba8c48281"],"newValue":["a2ecc872-1221-44bd-823b-d24be36fbef3","dcbbb23a-8af0-49ec-bcb0-d8b36d4234a5","381b3199-b3e6-483b-bc92-f8fba8c48281","1e9e860a-1e4f-4a67-9039-9290f644b70a"]},"1763734649710":{"actionType":"saveAll","createdAt":"1763734649710","actionID":"1763734649710","userID":"#TEMP","path":"system.capsules.6659ed3a-5f02-4f95-9ff0-a4eff2b04dc2.capsUseCodeInfo.capsUseInputs.sss_custom_caps_el-0.capsIptTxtValue","oldValue":"() => {\n  console.log(\"Botão Recibo\", args);\n\n  // ===== item =====\n  const item = tools?.findFlatItem ? tools.findFlatItem(args) : null;\n  if (!item || typeof item !== \"object\") {\n    console.log(\"Botão Recibo ERRO: item inválido\", item);\n    return (\n      <RN.Pressable>\n        <RN.Text style={{ color: \"#CCCCCC\", fontSize: 14, fontWeight: \"bold\" }}>\n          ↪\n        </RN.Text>\n      </RN.Pressable>\n    );\n  }\n  console.log(\"Botão Recibo 2\", item);\n\n  // ===== installmentId =====\n  const installmentId = item?.installmentId ?? null;\n  console.log(\"Botão Recibo 3\", installmentId);\n\n  // Se o installmentId for inválido, já retornamos um botão desativado\n  if (\n    installmentId === null ||\n    installmentId === undefined ||\n    installmentId === \"\" ||\n    Number.isNaN(Number(installmentId))\n  ) {\n    console.log(\"Botão Recibo ERRO: installmentId inválido\");\n    return (\n      <RN.Pressable>\n        <RN.Text style={{ color: \"#CCCCCC\", fontSize: 14, fontWeight: \"bold\" }}>\n          ↪\n        </RN.Text>\n      </RN.Pressable>\n    );\n  }\n\n  // ===== receipts =====\n  const receipts = tools?.getCtData\n    ? tools.getCtData(\"sc.A9.currents.currLoteData.receipts\")\n    : null;\n\n  const safeReceipts =\n    receipts && typeof receipts === \"object\" ? receipts : {};\n\n  console.log(\"Botão Recibo 4\", safeReceipts);\n\n  // ===== currReceipt =====\n  const currReceipt =\n    safeReceipts && Object.prototype.hasOwnProperty.call(safeReceipts, installmentId)\n      ? safeReceipts[installmentId]\n      : null;\n\n  console.log(\"Botão Recibo 5\", currReceipt);\n\n  // ===== receiptUrl =====\n  const receiptUrl =\n    currReceipt && typeof currReceipt === \"object\"\n      ? currReceipt.receiptUrl || null\n      : null;\n\n  console.log(\"Botão Recibo 6\", receiptUrl);\n\n  // ===== estilo condicionado =====\n  const condStyle = {\n    color: receiptUrl ? \"#315e2d\" : \"#CCCCCC\",\n    fontSize: 14,\n    fontWeight: \"bold\",\n  };\n\n  // ===== função de download (web) =====\n  const baixarRecibo = (url) => {\n    if (!url || typeof url !== \"string\") return;\n    try {\n      window.open(url, \"_blank\");\n    } catch (err) {\n      console.log(\"Erro ao abrir URL do recibo:\", err);\n    }\n  };\n\n  // ===== retorno =====\n  return (\n    <RN.Pressable\n      onPress={() => {\n        console.log(\"Clicou no botão de recibo\");\n        if (receiptUrl) baixarRecibo(receiptUrl);\n      }}\n    >\n      <RN.Text style={condStyle}>↪</RN.Text>\n    </RN.Pressable>\n  );\n};\n","newValue":"() => {\n  console.log(\"Botão Recibo\", args);\n\n  // ===== item =====\n  const item = tools?.findFlatItem ? tools.findFlatItem(args) : null;\n  if (!item || typeof item !== \"object\") {\n    console.log(\"Botão Recibo ERRO: item inválido\", item);\n    return (\n      <RN.Pressable>\n        <RN.Text style={{ color: \"#CCCCCC\", fontSize: 14, fontWeight: \"bold\" }}>\n          ↪\n        </RN.Text>\n      </RN.Pressable>\n    );\n  }\n  console.log(\"Botão Recibo 2\", item);\n\n  // ===== installmentId =====\n  const installmentId = item?.installmentId ?? null;\n  console.log(\"Botão Recibo 3\", installmentId);\n\n  // Se o installmentId for inválido, já retornamos um botão desativado\n  if (\n    installmentId === null ||\n    installmentId === undefined ||\n    installmentId === \"\" ||\n    Number.isNaN(Number(installmentId))\n  ) {\n    console.log(\"Botão Recibo ERRO: installmentId inválido\");\n    return (\n      <RN.Pressable>\n        <RN.Text style={{ color: \"#CCCCCC\", fontSize: 14, fontWeight: \"bold\" }}>\n          ↪\n        </RN.Text>\n      </RN.Pressable>\n    );\n  }\n\n  // ===== receipts =====\n  const receipts = tools?.getCtData\n    ? tools.getCtData(\"sc.A9.currents.currLoteData.receipts\")\n    : null;\n\n  const safeReceipts =\n    receipts && typeof receipts === \"object\" ? receipts : {};\n\n  console.log(\"Botão Recibo 4\", safeReceipts);\n\n  // ===== currReceipt =====\n  const currReceipt =\n    safeReceipts && Object.prototype.hasOwnProperty.call(safeReceipts, installmentId)\n      ? safeReceipts[installmentId]\n      : null;\n\n  console.log(\"Botão Recibo 5\", currReceipt);\n\n  // ===== receiptUrl =====\n  const receiptUrl =\n    currReceipt && typeof currReceipt === \"object\"\n      ? currReceipt.receiptUrl || null\n      : null;\n\n  console.log(\"Botão Recibo 6\", receiptUrl);\n\n  // ===== estilo condicionado =====\n  const condStyle = {\n    color: receiptUrl ? \"#315e2d\" : \"#CCCCCC\",\n    fontSize: 14,\n    fontWeight: \"bold\",\n  };\n\n  // ===== função de download (web) =====\n  const baixarRecibo = (url) => {\n    if (!url || typeof url !== \"string\") return;\n    try {\n      window.open(url, \"_blank\");\n    } catch (err) {\n      console.log(\"Erro ao abrir URL do recibo:\", err);\n    }\n  };\n\n  // ===== retorno =====\n  return (\n    <RN.Pressable\n      onPress={() => {\n        console.log(\"Clicou no botão de recibo\");\n        if (receiptUrl) baixarRecibo(receiptUrl);\n      }}\n    >\n      <RN.Text style={condStyle}>↪</RN.Text>\n    </RN.Pressable>\n  );\n}"}}