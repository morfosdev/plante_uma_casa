{"1763477315630":{"actionType":"saveAll","createdAt":"1763477315630","actionID":"1763477315630","userID":"#TEMP","path":"system.capsules.8abe2226-b89c-4398-b08f-50f59f28b837.capsUseCodeInfo.capsUseInputs.sss_custom_caps-0.capsIptTxtValue","oldValue":"(txt) => {\n  try {\n    // Garante string\n    if (typeof txt !== \"string\") txt = String(txt ?? \"\");\n\n    console.log(\"Raw recebido:\", txt, \" (type:\", typeof txt + \")\");\n  } catch (error) {\n    console.error(\"Erro ao processar o texto:\", error);\n  }\n}","newValue":"(txt) => {\n  try {\n    // Garante string\n    if (typeof txt !== \"string\") txt = String(txt ?? \"\");\n\n    console.log(\"Raw recebido:\", txt, \" (type:\", typeof txt + \")\");\n\n    // 1. Mantém apenas números\n    let clean = txt.replace(/\\D/g, \"\");\n\n    // 2. Limita ao tamanho máximo da máscara\n    if (clean.length > 8) clean = clean.slice(0, 8);\n\n    // 3. Aplica máscara dd/mm/aaaa\n    let masked = clean;\n\n    if (clean.length > 2) {\n      masked = clean.slice(0, 2) + \"/\" + clean.slice(2);\n    }\n    if (clean.length > 4) {\n      masked = masked.slice(0, 5) + \"/\" + masked.slice(5);\n    }\n\n    // Retorna a máscara para o chamador (opcional, mas recomendado)\n    return masked;\n\n  } catch (error) {\n    console.error(\"Erro ao processar o texto:\", error);\n    return txt;\n  }\n}"}}